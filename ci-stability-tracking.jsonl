{"date":"2025-12-18T02:47:22Z","commit":"002fc93c","run_id":"20324297839","all_passed":true,"failed_tests":[],"notes":"sync_declared_version fix - all 33 jobs passed"}
{"date":"2025-12-18T17:31:31Z","commit":"7fe21195","run_id":"20345550278","all_passed":false,"failed_tests":[{"name":"docker_nat_p2p (symmetric, full_cone)","job":"Validate PR / docker_nat_p2p (symmetric, full_cone)","class":"nat-traversal","previously_failed":null,"previously_passed":null},{"name":"test_messenger_racy_contentious_with_random_start_lag::min_delay_4_100::secrecy_mode_2_SecrecyMode__Perfect","job":"Validate PR / Ratchet Stability Test","class":"messenger","previously_failed":false,"previously_passed":true,"iteration":2,"pattern":"declared=161 current=160 loop - declared_version incremented before sync completed"},{"name":"core_libs (macos-latest)","job":"Validate PR / core_libs (macos-latest)","class":"unknown","previously_failed":null,"previously_passed":null}],"notes":"Iteration 1 passed (sync fix works). Iteration 2 failed - race where new declared_version (161) set before sync_declared_version resets to 160. Queue drain starts new rekey immediately after first message sent, before previous rekey fully completes."}
{"date":"2025-12-18T18:48:54Z","commit":"4f87b8aa","run_id":"20346888341","all_passed":false,"failed_tests":[{"name":"test_messenger_racy_contentious::secrecy_mode_2_SecrecyMode__Perfect","job":"Validate PR / Ratchet Stability Test","class":"messenger","iteration":1,"pattern":"declared=101 current=100 loop - Client 10 stuck with desync between declared and current version"}],"notes":"Reverted 0ms/1ms values but base contentious test (delay=None) still flaky. Client 10 stuck at version 100â†’101 while Client 20 progressed to version 100. AliceToBob messages arriving out of order (peer_latest=88 vs local_latest=100). Iterations 2-10 passed."}
{"date":"2025-12-18T19:25:11Z","commit":"37104092","run_id":"20347821824","all_passed":true,"failed_tests":[],"notes":"Re-run passed - all 33 jobs succeeded. test_messenger_racy_contentious flakiness was transient (passed this time). 0ms/1ms test cases remain disabled."}
{"date":"2025-12-23T16:08:26Z","commit":"f59d3732","run_id":"20465659188","all_passed":false,"failed_tests":[{"name":"test_messenger_racy_with_random_start_lag::min_delay_2_1::secrecy_mode_2_SecrecyMode__Perfect","job":"Validate PR / Ratchet Stability Test","class":"messenger","iteration":7,"pattern":"declared=123 current=122 loop - rekey hanging (not erroring) so error fix doesn't trigger"},{"name":"core_libs (macos-latest)","job":"Validate PR / core_libs (macos-latest)","class":"unknown"}],"notes":"Added sync_declared_version on ERROR path, re-enabled 0ms/1ms tests. 19/20 ratchet tests passed, 1 timed out after 15min. Error fix works for error cases but hanging rekey (no error) still blocks queue. macOS job also failed (unrelated)."}
{"date":"2025-12-23T16:49:19Z","commit":"d985d015","run_id":"20466531410","all_passed":false,"failed_tests":[{"name":"test_messenger_racy_contentious_with_random_start_lag::min_delay_3_10::secrecy_mode_2_SecrecyMode__Perfect","job":"Validate PR / Ratchet Stability Test","class":"messenger","iteration":3},{"name":"test_messenger_racy_with_random_start_lag::min_delay_3_10::secrecy_mode_2_SecrecyMode__Perfect","job":"Validate PR / Ratchet Stability Test","class":"messenger","iteration":3}],"notes":"Re-run to verify stability. Iterations 1-2, 4-10 all passed. Iteration 3 had 2 timeouts in 10ms delay tests. Different pattern than previous - not declared_version starvation, but rekey() hanging waiting for message. Likely a deadlock in the rekey protocol itself, not the error recovery path."}
{"date":"2025-12-23T18:30:00Z","commit":"pending","run_id":"pending","all_passed":"pending","failed_tests":[],"notes":"Root cause found: constructor stored AFTER sending AliceToBob. Race condition where spawn_rekey_process receives BobToAlice before trigger_rekey stores constructor. If Leader (from Contended), BobToAlice skipped as stale due to missing constructor, causing deadlock. Fix: moved constructor storage to BEFORE sending AliceToBob. All 45 citadel_crypt tests pass locally."}
